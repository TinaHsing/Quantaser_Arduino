/*==============================================================================
  * @file           : Si5341_Config.h
  * @brief          : Header for Si5341_Config.c file.
  ==============================================================================
  * @description	: Si5341_Config is a program which configure Si5341
  * 				  clock generator.
  *
  ==============================================================================
  * @attention
  *
  * Copyright (c) 2023 Quantaser.
  * All rights reserved.
  *
  ==============================================================================*/
#ifndef _SI5341_CONFIG_H_
#define _SI5341_CONFIG_H_

#include <Wire.h>
#include <openGLCD.h>

/*=========================================================================================================*/
/*  File Setting                                                                                           */
/*=========================================================================================================*/

/*=========================================================================================================*/
/*  Define parameter                                                                                       */
/*=========================================================================================================*/

#define XST_SUCCESS           0
#define XST_FAILURE           1

#define I2C_SI5341_ADDR			  0x74
#define I2C_SI5341_SEL			  (1 << 4)
#define I2C_SLEEP_US			    1000

#define SI5341_SWITCH_DELAY		(10) // 10ms
#define SI5341_PRESET_DELAY		(300) // 300ms

/*=========================================================================================================*/
/*  Enumerate                                                                                              */
/*=========================================================================================================*/

/*=========================================================================================================*/
/*  Structure                                                                                              */
/*=========================================================================================================*/

extern TwoWire Wire1;

/*=========================================================================================================*/
/*  Function                                                                                               */
/*=========================================================================================================*/
class Si5341
{
public:
  unsigned char Si5341_Page;
  Si5341();
  int SetFreq(void);
private:
  int PreSet(void);
  int SetAllReg(void);
  int PostSet(void);
  int Write(unsigned char Address, unsigned char* Data, unsigned int Length);
  int Read(unsigned char Address, unsigned char* Data, unsigned int Length);
};

#endif /* _SI5341_CONFIG_H_ */
